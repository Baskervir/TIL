[영속성 컨텍스트]



[JPA가 영속성 컨텍스트에 저장하는 이유]
1차 캐시 역할
    동일 엔티티 반복 조회 시 DB 안 건드리고 메모리에서 해결 (효율적)
변경 감지 (Dirty Checking)
    이후 setter 등으로 필드 변경 -> 트랜잭션 커밋 시 자동 UPDATE
동일성 보장
    같은 ID의 엔티티는 항상 같은 객체(==)로 유지
지연 로딩 가능
    연관된 프록시 객체들도 함께 관리된다
쓰기 지연 SQL 저장소와 통합
    persist()헤도 즉시 INSERT 안 됨 -> 트랜잭션 끝날 때 일괄 실행

[만약 영속 컨텍스트에 저장하지 않는다면?]
같은 엔티티 여러 번 조회 시 객체가 다 달리짐
변경 감지 안 되고, 명시적으로 merge()해야한다
성능 저하, JPA의 핵심 기능인 자동 관리 의미 상실

[정리]
DB에서 꺼내오면 끝 이 아닌 객체 상태 관리까지 해야 한다
영속 컨텍스트의 기능들로 캐시, 변경감지, 지연 로딩, 동일성 보장 등 장점 다수 존재
단순 조회만 생각할 경우 @Transactional(readOnly = true) + DTO 변환 or NaviteQuery 추천
